{% extends 'login_base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block body %}

    {% block content %}

        <div class="register-container subscription">
            <h1 class="big-title">Choix de l'abonnement</h1>

            <div class="subscription-container">
                {% for subscription in subscriptions %}

                    {% set regularPrice = subscription.regularPrice|trim %}
                    {% set salePrice = subscription.salePrice|trim %}
                    {% set subscriptionId = subscription.id %}

                    {% if salePrice == 0 %}
                        {% set salePrice = regularPrice %}
                    {% endif %}

                    <div class="subscription-block">
                        <p class="subscription-duration">{{ subscription.duration }} mois</p>

                        <div>
                            <p class="subscription-price">{{ salePrice }} €</p>

                            {% if salePrice != regularPrice %}
                                <p class="sale">Au lieu de <span class="subscription-regular-price">{{ regularPrice }} €</span></p>
                            {% endif %}

                            <form method="post" action="{{ path('subscription_payment', {subscriptionId: subscriptionId})}}">
                                <input type="hidden" id="subscriptionId" value="{{ subscriptionId }}">
                                <input type="submit" class="yellow-button" value="Choisir">
                            </form>
                        </div>

                    </div>

                {% endfor %}
            </div>

        </div>
    {% endblock %}

{% endblock %}